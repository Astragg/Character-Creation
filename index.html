<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arrancar Character Creator</title>
    <style>
        :root {
            --bg-color: #1a1a1a;
            --panel-bg: #2b2b2b;
            --text-color: #e0e0e0;
            --accent-color: #00d2ff; /* Spirit Blue */
            --accent-secondary: #ff0055; /* Cero Red */
            --border-color: #444;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
        }

        .container {
            display: grid;
            grid-template-columns: 350px 1fr;
            gap: 20px;
            max-width: 1200px;
            width: 100%;
        }

        /* CONTROLS SIDEBAR */
        .controls {
            background-color: var(--panel-bg);
            padding: 20px;
            border-radius: 8px;
            border: 1px solid var(--border-color);
            height: fit-content;
        }

        h1, h2, h3 {
            margin-top: 0;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        h1 { color: var(--accent-color); font-size: 1.5rem; text-align: center; border-bottom: 2px solid var(--accent-color); padding-bottom: 10px; }
        h2 { font-size: 1.2rem; color: var(--accent-secondary); margin-top: 20px; }
        
        label { display: block; margin-top: 10px; font-weight: bold; font-size: 0.9rem; }
        input[type="text"], input[type="number"], select {
            width: 100%;
            padding: 8px;
            background: #111;
            border: 1px solid #555;
            color: white;
            border-radius: 4px;
            box-sizing: border-box;
        }

        .stat-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        .evo-list {
            max-height: 300px;
            overflow-y: auto;
            background: #111;
            padding: 10px;
            border: 1px solid #555;
            margin-top: 5px;
        }

        .evo-item {
            display: flex;
            align-items: flex-start;
            margin-bottom: 8px;
            font-size: 0.85rem;
        }
        
        .evo-item input { width: auto; margin-right: 8px; margin-top: 3px; }

        button.print-btn {
            background: var(--accent-color);
            color: #000;
            border: none;
            width: 100%;
            padding: 15px;
            font-weight: bold;
            margin-top: 20px;
            cursor: pointer;
            text-transform: uppercase;
        }
        button.print-btn:hover { background: #fff; }

        /* CHARACTER SHEET */
        .sheet {
            background-color: #f4f4f4;
            color: #111;
            padding: 40px;
            border-radius: 2px;
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
            font-family: 'Georgia', serif;
            position: relative;
        }

        .sheet-header {
            display: flex;
            justify-content: space-between;
            border-bottom: 3px solid #000;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }

        .sheet-title { font-size: 2.5rem; font-weight: bold; font-family: sans-serif; text-transform: uppercase; }
        .sheet-subtitle { font-size: 1rem; color: #555; }

        .sheet-grid {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 30px;
        }

        .stat-box {
            border: 2px solid #000;
            padding: 10px;
            text-align: center;
            margin-bottom: 10px;
            border-radius: 8px;
            background: #fff;
        }
        .stat-val { font-size: 1.5rem; font-weight: bold; display: block; }
        .stat-label { text-transform: uppercase; font-size: 0.7rem; letter-spacing: 1px; }

        .feature-block {
            margin-bottom: 20px;
            border-left: 4px solid var(--accent-secondary);
            padding-left: 10px;
        }
        .feature-name { font-weight: bold; font-size: 1.1rem; }
        .feature-desc { font-size: 0.9rem; line-height: 1.4; color: #333; }

        .vitals-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-bottom: 20px;
            background: #e0e0e0;
            padding: 10px;
            border-radius: 4px;
        }
        .vital-box { text-align: center; }
        .vital-label { font-size: 0.7rem; text-transform: uppercase; display: block; }
        .vital-val { font-size: 1.2rem; font-weight: bold; }

        .section-header {
            background: #000;
            color: #fff;
            padding: 5px 10px;
            text-transform: uppercase;
            font-weight: bold;
            margin-bottom: 10px;
            font-family: sans-serif;
        }

        @media print {
            body { background: white; padding: 0; display: block; }
            .controls { display: none; }
            .container { display: block; width: 100%; max-width: none; }
            .sheet { box-shadow: none; border: none; width: 100%; padding: 0; }
        }
    </style>
</head>
<body>

<div class="container">
    <div class="controls">
        <h1>Arrancar Forge</h1>
        
        <label>Name</label>
        <input type="text" id="charName" placeholder="Enter Name" oninput="updateSheet()">
        
        <div class="stat-grid">
            <div>
                <label>Level (1-20)</label>
                <input type="number" id="level" min="1" max="20" value="1" oninput="updateLogic()">
            </div>
            <div>
                <label>Aspect of Death</label>
                <select id="subclass" onchange="updateSheet()">
                    <option value="Destruction">Destruction (Grimmjow)</option>
                    <option value="Nihilism">Nihilism (Ulquiorra)</option>
                    <option value="Madness">Madness (Szayelaporro)</option>
                    <option value="Sacrifice">Sacrifice (Harribel)</option>
                    <option value="Solitude">Solitude (Starrk)</option>
                    <option value="Time">Time (Baraggan)</option>
                </select>
            </div>
        </div>

        <h2>Ability Scores</h2>
        <div class="stat-grid">
            <div><label>STR</label><input type="number" id="str" value="10" oninput="updateSheet()"></div>
            <div><label>DEX</label><input type="number" id="dex" value="16" oninput="updateSheet()"></div>
            <div><label>CON</label><input type="number" id="con" value="16" oninput="updateSheet()"></div>
            <div><label>INT</label><input type="number" id="int" value="10" oninput="updateSheet()"></div>
            <div><label>WIS</label><input type="number" id="wis" value="10" oninput="updateSheet()"></div>
            <div><label>CHA</label><input type="number" id="cha" value="10" oninput="updateSheet()"></div>
        </div>

        <h2>Hollow Evolutions</h2>
        <div id="evoLimitDisplay" style="font-size: 0.8rem; margin-bottom: 5px; color: var(--accent-color);">Available: 0</div>
        <div class="evo-list" id="evoList">
            </div>

        <button class="print-btn" onclick="window.print()">Print Character Sheet</button>
    </div>

    <div class="sheet">
        <div class="sheet-header">
            <div>
                <div class="sheet-title" id="displayName">Nameless</div>
                <div class="sheet-subtitle">Race: Arrancar | Class: The Arrancar</div>
            </div>
            <div style="text-align: right;">
                <div class="sheet-title" style="font-size: 1.5rem;" id="displayLevel">Level 1</div>
                <div class="sheet-subtitle" id="displaySubclass">Aspect of Destruction</div>
            </div>
        </div>

        <div class="vitals-grid">
            <div class="vital-box">
                <span class="vital-label">Armor Class</span>
                <span class="vital-val" id="displayAC">13</span>
            </div>
            <div class="vital-box">
                <span class="vital-label">Hit Points</span>
                <span class="vital-val" id="displayHP">10</span>
            </div>
            <div class="vital-box">
                <span class="vital-label">Proficiency</span>
                <span class="vital-val" id="displayProf">+2</span>
            </div>
            <div class="vital-box">
                <span class="vital-label">Speed</span>
                <span class="vital-val">30 ft</span>
            </div>
        </div>

        <div class="sheet-grid">
            <div>
                <div class="section-header">Attributes</div>
                <div class="stat-box"><span class="stat-val" id="dispSTR">10 (+0)</span><span class="stat-label">Strength</span></div>
                <div class="stat-box"><span class="stat-val" id="dispDEX">10 (+0)</span><span class="stat-label">Dexterity</span></div>
                <div class="stat-box"><span class="stat-val" id="dispCON">10 (+0)</span><span class="stat-label">Constitution</span></div>
                <div class="stat-box"><span class="stat-val" id="dispINT">10 (+0)</span><span class="stat-label">Intelligence</span></div>
                <div class="stat-box"><span class="stat-val" id="dispWIS">10 (+0)</span><span class="stat-label">Wisdom</span></div>
                <div class="stat-box"><span class="stat-val" id="dispCHA">10 (+0)</span><span class="stat-label">Charisma</span></div>

                <div class="section-header" style="margin-top:20px;">Reiatsu Engine</div>
                <div class="stat-box" style="border-color: var(--accent-secondary);">
                    <span class="stat-val" id="displayReiatsu">2</span>
                    <span class="stat-label">Max Reiatsu Points</span>
                </div>
                <div class="stat-box" style="border-color: var(--accent-secondary);">
                    <span class="stat-val" id="displayCero">1d10</span>
                    <span class="stat-label">Cero Damage (Force)</span>
                </div>
                <div class="feature-block">
                    <div class="feature-name">Bala</div>
                    <div class="feature-desc">Bonus Action. Range 60ft. <span id="balaDmg">1d6</span> Force dmg.</div>
                </div>
            </div>

            <div>
                <div class="section-header">Class Features</div>
                <div id="coreFeaturesList">
                    </div>

                <div class="section-header">Aspect of Death Features</div>
                <div id="subclassFeaturesList">
                    </div>

                <div class="section-header">Evolutions</div>
                <div id="selectedEvosList">
                    </div>
            </div>
        </div>
    </div>
</div>

<script>
    // --- DATA ---
    const classTable = [
        { lvl: 1, prof: 2, reiatsu: 2, cero: '1d10', evos: 0, bala: '1d6' },
        { lvl: 2, prof: 2, reiatsu: 3, cero: '1d10', evos: 2, bala: '1d6' },
        { lvl: 3, prof: 2, reiatsu: 4, cero: '2d10', evos: 2, bala: '1d6' },
        { lvl: 4, prof: 2, reiatsu: 5, cero: '2d10', evos: 2, bala: '1d6' },
        { lvl: 5, prof: 3, reiatsu: 6, cero: '2d10', evos: 3, bala: '1d8' },
        { lvl: 6, prof: 3, reiatsu: 7, cero: '3d10', evos: 3, bala: '1d8' },
        { lvl: 7, prof: 3, reiatsu: 8, cero: '3d10', evos: 4, bala: '1d8' },
        { lvl: 8, prof: 3, reiatsu: 9, cero: '3d10', evos: 4, bala: '1d8' },
        { lvl: 9, prof: 4, reiatsu: 10, cero: '4d10', evos: 5, bala: '1d8' },
        { lvl: 10, prof: 4, reiatsu: 11, cero: '4d10', evos: 5, bala: '1d8' },
        { lvl: 11, prof: 4, reiatsu: 12, cero: '5d10', evos: 5, bala: '1d10' },
        { lvl: 12, prof: 4, reiatsu: 13, cero: '5d10', evos: 6, bala: '1d10' },
        { lvl: 13, prof: 5, reiatsu: 14, cero: '5d10', evos: 6, bala: '1d10' },
        { lvl: 14, prof: 5, reiatsu: 15, cero: '6d10', evos: 6, bala: '1d10' },
        { lvl: 15, prof: 5, reiatsu: 16, cero: '6d10', evos: 7, bala: '1d10' },
        { lvl: 16, prof: 5, reiatsu: 17, cero: '6d10', evos: 7, bala: '1d10' },
        { lvl: 17, prof: 6, reiatsu: 18, cero: '7d10', evos: 7, bala: '1d10' },
        { lvl: 18, prof: 6, reiatsu: 19, cero: '8d10', evos: 8, bala: '1d10' },
        { lvl: 19, prof: 6, reiatsu: 20, cero: '8d10', evos: 8, bala: '1d10' },
        { lvl: 20, prof: 6, reiatsu: 25, cero: '10d10', evos: 8, bala: '1d10' }
    ];

    const subclassData = {
        "Destruction": [
            { lvl: 3, name: "Primal Scream", desc: "Bonus Action roar. 10ft range, WIS save or Frightened." },
            { lvl: 5, name: "Cero Buff", desc: "Cero knocks targets Prone and Stuns them." },
            { lvl: 11, name: "Resurrección: Pantera", desc: "Reach 15ft. Attacks deal Force damage. Advantage vs Frightened." },
            { lvl: 20, name: "Segunda Etapa: Desgarrón", desc: "Cast Steel Wind Strike at will (4 Reiatsu)." }
        ],
        "Nihilism": [
            { lvl: 3, name: "Emptiness", desc: "Immune to Charm. No need to eat/breathe." },
            { lvl: 5, name: "Instant Regen", desc: "Add CON Mod to High-Speed Regeneration." },
            { lvl: 11, name: "Resurrección: Murciélago", desc: "Fly speed x2. Bonus Action Dash." },
            { lvl: 14, name: "Lanza del Relámpago", desc: "300ft range. 5d10 Force in 20ft sphere. 1/Short Rest." },
            { lvl: 20, name: "Segunda Etapa: Latigazo", desc: "Immune to Non-Magical damage. Two actions per turn." }
        ],
        "Madness": [
            { lvl: 3, name: "Analysis", desc: "Bonus Action: Learn Target's HP/AC/Immunities." },
            { lvl: 5, name: "Voodoo Doll", desc: "Action (3 Reiatsu). Link to target. They take damage you take." },
            { lvl: 11, name: "Resurrección: Fornicarás", desc: "Create Carbon-Copy clones of two targets." },
            { lvl: 20, name: "Segunda Etapa: Puppet Master", desc: "Cast Dominate Monster (5 Reiatsu)." }
        ],
        "Sacrifice": [
            { lvl: 3, name: "Phantom Currents", desc: "Swim Speed = Walk. Reaction: Disadvantage on attacks vs allies." },
            { lvl: 5, name: "Ola Azul", desc: "Attack replacement: 15ft Cone (2d6 Cold + Push)." },
            { lvl: 11, name: "Resurrección: Tiburon", desc: "Immune Cold. Melee hits splash water (DEX dmg)." },
            { lvl: 20, name: "Segunda Etapa: Abyss Queen", desc: "100ft water sphere. Enemies have Disadv on melee. 4d10 Bludgeoning/turn." }
        ],
        "Solitude": [
            { lvl: 3, name: "Cero Metralleta", desc: "Fire Cero Shots (60ft, 1d10 Force) as weapon attacks." },
            { lvl: 5, name: "Quick Draw", desc: "No Loading. No Disadv on ranged attacks in melee." },
            { lvl: 11, name: "Resurrección: Los Lobos", desc: "Summon 2 Spirit Wolves. Explode for 4d6 Force." },
            { lvl: 20, name: "Segunda Etapa: Primary Soul", desc: "Split into 10 Wolves. Invincible until all 10 die." }
        ],
        "Time": [
            { lvl: 3, name: "Aura of Age", desc: "Enemies within 5ft lose 10ft Speed." },
            { lvl: 5, name: "Senectud", desc: "1 Reiatsu on hit: +1d8 Necrotic & -1 AC to target." },
            { lvl: 11, name: "Resurrección: Arrogante", desc: "Ranged attacks against you have Disadvantage." },
            { lvl: 14, name: "Respira", desc: "30ft cloud. 5d10 Necrotic. Dissolves 0 HP targets." },
            { lvl: 20, name: "Segunda Etapa: Absolute Entropy", desc: "Auto-hit melee. Immune to all except Force/Radiant." }
        ]
    };

    const coreFeatures = [
        { lvl: 1, name: "Hierro", desc: "Unarmored AC = 10+DEX+CON. Reaction: Reduce dmg by 1d10+Level." },
        { lvl: 2, name: "Cero", desc: "100ft Line or 30ft Cone. DEX Save. Costs 2 Reiatsu." },
        { lvl: 2, name: "Sonído", desc: "Bonus Action: Teleport 30ft (1 Reiatsu)." },
        { lvl: 5, name: "Extra Attack", desc: "Attack twice when taking Attack action." },
        { lvl: 6, name: "High-Speed Regen", desc: "Bonus Action: Spend Reiatsu to heal 1d10 per point." },
        { lvl: 7, name: "Pesquisa", desc: "Sensory Pulse." },
        { lvl: 9, name: "Gran Rey Cero", desc: "Cero does 4d10. Ignores resistance if upgraded." },
        { lvl: 10, name: "Despair Aura", desc: "Immune to Fear." },
        { lvl: 11, name: "Resurrección", desc: "True Form. Heal to full. Fly Speed. +Prof Bonus to Dmg." },
        { lvl: 15, name: "Relentless", desc: "Refuse Death once per Long Rest." },
        { lvl: 18, name: "Cero Oscuras", desc: "Cero crits on 19-20. Necrotic + Force." }
    ];

    const evolutions = [
        // Tier 1
        { tier: 1, name: "Bala Barrage", desc: "Replace attack with 10ft cube spray (2d4 Force)." },
        { tier: 1, name: "Acidic Touch", desc: "Melee deals +1d4 Acid." },
        { tier: 1, name: "Pesquisa (Radar)", desc: "Gain Blindsight 30ft." },
        { tier: 1, name: "Gemelos Sonído", desc: "After Sonído, attacks vs you have Disadvantage." },
        { tier: 1, name: "Glotonería", desc: "Eat corpse to regain HP." },
        { tier: 1, name: "Tiburon Skin", desc: "Advantage on Grappling." },
        // Tier 2
        { tier: 2, name: "Hierro Armor", desc: "Resistance to non-magical B/P/S damage." },
        { tier: 2, name: "Cero Doble", desc: "Reaction: Absorb energy dmg, reflect in next attack." },
        { tier: 2, name: "Garganta", desc: "Dimensional pocket storage." },
        { tier: 2, name: "Negación", desc: "Cast Command ('Kneel')." },
        { tier: 2, name: "Dilated Time", desc: "Reaction: Enemy misses you -> their Speed is 0." },
        { tier: 2, name: "Colmillo", desc: "Manifest magical force sword." },
        // Tier 3
        { tier: 3, name: "Gran Rey Cero+", desc: "Cero ignores Resistance/Immunity." },
        { tier: 3, name: "Amor", desc: "Control enemy Action (WIS save)." },
        { tier: 3, name: "Los Lobos (Pack)", desc: "Summon 3 exploding wolves." },
        { tier: 3, name: "Calaveras", desc: "Summon 3 Skeletons." },
        { tier: 3, name: "Grand Fall", desc: "Jump crash (3d10 Bludg + Prone)." },
        // Tier 4
        { tier: 4, name: "Indestructible", desc: "Resistance to ALL dmg. -10ft Speed." },
        { tier: 4, name: "The Second Skin", desc: "On 0HP, regain 20HP if you reach an ally." },
        { tier: 4, name: "Respira (Rot)", desc: "20ft Aura (4d10 Necrotic). Destroys weapons." },
        { tier: 4, name: "Hirviendo", desc: "60ft flash-boil (Fire/Cold dmg)." },
        { tier: 4, name: "Gran Caída", desc: "Death's Axe. 10d10 Necrotic." }
    ];

    // --- LOGIC ---

    function getMod(score) {
        return Math.floor((score - 10) / 2);
    }

    function fmtMod(score) {
        const mod = getMod(score);
        return mod >= 0 ? `+${mod}` : mod;
    }

    function initEvolutions() {
        const list = document.getElementById('evoList');
        list.innerHTML = "";
        evolutions.forEach((evo, index) => {
            const div = document.createElement('div');
            div.className = 'evo-item';
            
            // Logic handled in updateLogic to disable/enable based on level
            div.innerHTML = `
                <input type="checkbox" id="evo-${index}" value="${index}" onchange="updateSheet()">
                <div>
                    <strong>${evo.name}</strong> <span style="color:#777">(Tier ${evo.tier})</span><br>
                    ${evo.desc}
                </div>
            `;
            list.appendChild(div);
        });
    }

    function updateLogic() {
        // Enforce level caps on evolutions and limit selection count
        const lvl = parseInt(document.getElementById('level').value);
        const tableData = classTable[lvl - 1];
        const maxEvos = tableData.evos;
        
        // Update checkboxes availability based on Tier
        evolutions.forEach((evo, index) => {
            const checkbox = document.getElementById(`evo-${index}`);
            let reqLvl = 1;
            if(evo.tier === 2) reqLvl = 5;
            if(evo.tier === 3) reqLvl = 9;
            if(evo.tier === 4) reqLvl = 15;

            if (lvl < reqLvl) {
                checkbox.disabled = true;
                checkbox.checked = false;
                checkbox.parentElement.style.opacity = "0.4";
            } else {
                checkbox.disabled = false;
                checkbox.parentElement.style.opacity = "1";
            }
        });

        // Enforce Count Limit
        const checkboxes = document.querySelectorAll('.evo-list input[type="checkbox"]');
        let checkedCount = 0;
        checkboxes.forEach(box => { if(box.checked) checkedCount++; });

        document.getElementById('evoLimitDisplay').innerText = `Evolutions Known: ${checkedCount} / ${maxEvos}`;

        checkboxes.forEach(box => {
            if (!box.checked && checkedCount >= maxEvos) {
                box.disabled = true;
            } else if (!box.checked && !box.disabled && lvl >= (box.value < 6 ? 1 : box.value < 12 ? 5 : box.value < 18 ? 9 : 15)) {
                 // Re-enable if under limit and meets tier req (logic simplified here, relies on previous block)
                 const index = parseInt(box.value);
                 const evo = evolutions[index];
                 let reqLvl = 1;
                 if(evo.tier === 2) reqLvl = 5;
                 if(evo.tier === 3) reqLvl = 9;
                 if(evo.tier === 4) reqLvl = 15;
                 
                 if(lvl >= reqLvl) box.disabled = false;
            }
        });

        updateSheet();
    }

    function updateSheet() {
        // Inputs
        const name = document.getElementById('charName').value || "Nameless";
        const lvl = parseInt(document.getElementById('level').value);
        const subclass = document.getElementById('subclass').value;
        const sSTR = parseInt(document.getElementById('str').value);
        const sDEX = parseInt(document.getElementById('dex').value);
        const sCON = parseInt(document.getElementById('con').value);
        const sINT = parseInt(document.getElementById('int').value);
        const sWIS = parseInt(document.getElementById('wis').value);
        const sCHA = parseInt(document.getElementById('cha').value);

        const data = classTable[lvl - 1];

        // Header
        document.getElementById('displayName').innerText = name;
        document.getElementById('displayLevel').innerText = "Level " + lvl;
        document.getElementById('displaySubclass').innerText = "Aspect of " + subclass;

        // Stats
        document.getElementById('dispSTR').innerText = `${sSTR} (${fmtMod(sSTR)})`;
        document.getElementById('dispDEX').innerText = `${sDEX} (${fmtMod(sDEX)})`;
        document.getElementById('dispCON').innerText = `${sCON} (${fmtMod(sCON)})`;
        document.getElementById('dispINT').innerText = `${sINT} (${fmtMod(sINT)})`;
        document.getElementById('dispWIS').innerText = `${sWIS} (${fmtMod(sWIS)})`;
        document.getElementById('dispCHA').innerText = `${sCHA} (${fmtMod(sCHA)})`;

        // Vitals
        const ac = 10 + getMod(sDEX) + getMod(sCON);
        document.getElementById('displayAC').innerText = ac;
        
        // HP Calculation (Simple average: 6 per level + CON mod)
        const hp = (10 + getMod(sCON)) + ((lvl - 1) * (6 + getMod(sCON)));
        document.getElementById('displayHP').innerText = hp;
        document.getElementById('displayProf').innerText = `+${data.prof}`;

        // Class Specifics
        document.getElementById('displayReiatsu').innerText = data.reiatsu;
        document.getElementById('displayCero').innerText = data.cero;
        document.getElementById('balaDmg').innerText = data.bala;

        // Render Features
        const coreList = document.getElementById('coreFeaturesList');
        coreList.innerHTML = "";
        coreFeatures.forEach(feat => {
            if (feat.lvl <= lvl) {
                coreList.innerHTML += `
                    <div class="feature-block">
                        <div class="feature-name">${feat.name}</div>
                        <div class="feature-desc">${feat.desc}</div>
                    </div>
                `;
            }
        });

        const subList = document.getElementById('subclassFeaturesList');
        subList.innerHTML = "";
        subclassData[subclass].forEach(feat => {
            if (feat.lvl <= lvl) {
                subList.innerHTML += `
                    <div class="feature-block">
                        <div class="feature-name">${feat.name}</div>
                        <div class="feature-desc">${feat.desc}</div>
                    </div>
                `;
            }
        });

        const evoList = document.getElementById('selectedEvosList');
        evoList.innerHTML = "";
        const checkboxes = document.querySelectorAll('.evo-list input[type="checkbox"]');
        let hasEvo = false;
        checkboxes.forEach(box => {
            if (box.checked) {
                hasEvo = true;
                const evo = evolutions[box.value];
                evoList.innerHTML += `
                    <div class="feature-block" style="border-color: #00d2ff;">
                        <div class="feature-name">${evo.name}</div>
                        <div class="feature-desc">${evo.desc}</div>
                    </div>
                `;
            }
        });
        if(!hasEvo) evoList.innerHTML = "<div style='font-style:italic; color:#777'>No evolutions selected.</div>";
    }

    // Initialize
    initEvolutions();
    updateLogic();

</script>

</body>
</html>
